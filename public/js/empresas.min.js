function HoneyEnterpise() {
	HoneyHope.apply(this, [$("#btn_creemp"), $("#btn_upemp"), $("#btn_delemp"), $('<tbody></tbody>').attr('id', 'tbody_emp'), $("#modal-emp")]);
	var Clave = $("#clave_emp"), Nombre = $("#nom_emp"), RFC = $("#rfc_emp"), Dir = $("#dir_emp"), Tel = $("#tel_emp"), Mail = $("#email_emp"), Combo = $("#tip_emp"), token = $("#token_empresa").val();
	var that = this;

	/*Eventos HoneyEnterprise*/
	that.btn1.click(function(){
		that.Route = "/Empresas/";
		that.Types = "POST";
		that.Datos = { Sml_IdEmp: Clave.val(), Vch_Nom : Nombre.val(), Vch_rfcc : RFC.val(), Vch_Dire : Dir.val(), Vch_Tel : Tel.val(), Vch_mail : Mail.val(), Sml_Ti : Combo.val(), Vch_Tipo : 'Insertar' };
		that.Ajax(token);
	});

	that.btn2.click(function(){
		that.Route = "/Empresas/"+Clave.val()+"";
		that.Types = "PUT";
		that.Datos = { Sml_IdEmp: Clave.val(), Vch_Nom : Nombre.val(), Vch_rfcc : RFC.val(), Vch_Dire : Dir.val(), Vch_Tel : Tel.val(), Vch_mail : Mail.val(), Sml_Ti : Combo.val(), Vch_Tipo : 'Actualizar' };
		that.Ajax(token)
	});

	that.btn3.click(function(){
		that.Route = "/Empresas/"+Clave.val()+"";
		that.Types = "DELETE";
		that.Datos = { Sml_IdEmp: Clave.val(), Vch_Nom : Nombre.val(), Vch_rfcc : RFC.val(), Vch_Dire : Dir.val(), Vch_Tel : Tel.val(), Vch_mail : Mail.val(), Sml_Ti : Combo.val(), Vch_Tipo : 'Eliminar' };
		that.Ajax(token)
	});

	$("#btn_newemp").click(function(){ that.Modal(this, 1); });

	$(document).on('click', '#btn_editenter', function(e){
		e.preventDefault();
		that.Route = "/Empresas/"+this.value+"/edit";
		that.Types = "GET";
		that.Modal(this, 2);
	});

	$(document).on('click', '#btn_deleteenter', function(e){
		e.preventDefault();
		that.Route = "/Empresas/"+this.value+"/edit";
		that.Types = "GET";
		that.Modal(this, 3);
	});

	$(document).on('click', '.pagination a', function(e){
		e.preventDefault();
		that.page = $(this).attr('href').split('page=')[1];
		that.Route = "/Empresas";
		that.Pagination();
	});

	/*Funciones HoneyEnterprise*/
	
	that.CargaTabla = function(value){
		that.Route = "/Empresas";
		that.tabla.empty();
		$.get(that.Route, function(response){
			if(value == 1) { that.CargaDatosTabla(); }else{ that.CargaDatosTabla(1, response); }
		});
	}

	that.CargaDatosTabla = function(pagination = 0, data = null){
		that.Route = "/emptable";
		that.page = (pagination == 0)? that.page = 1 : that.page = pagination;
		that.tabla.empty();
		$.ajax({
			url: that.Route,
			data: {page : that.page },
			type: 'GET',
			dataType: 'json',
			beforeSend: function(){
				$('.preloader').show();
			},
			success : function(response){
				$(response.data).each(function(key, value){
					that.tabla.append("<tr><td>"+this.Sml_IdEmpresa+"</td>"+
						"<td>"+this.Vch_Nombre+"</td><td>"+this.Vch_RFC+"</td><td>"+this.Vch_Direccion+"</td><td>"+this.Vch_Telefono+"</td>"+
						"<td>"+this.Vch_Email+"</td><td>"+this.Vch_Tipo+"</td>"+
						"<td><button class='btn btn-success' id='btn_editenter' value="+this.Sml_IdEmpresa+">Editar</button></td>"+
						"<td><button class='btn btn-danger' id='btn_deleteenter' value="+this.Sml_IdEmpresa+">Eliminar</button></td></tr>");	
				});
				$("#tableemp").append(that.tabla);
				if(data != null){ $("#render").html(data); }
				$('.preloader').hide();  
			}
		});
	}

	that.CargaCombo = function(){
		$.ajax({
			url: "/empcombo/",
			type: "GET",
			dataType: 'json',
			success : function(response){
				$(response).each(function(key, value){
					var option = $(document.createElement('option'));
					option.val(value.Sml_Tipo);
					option.text(value.Vch_TIpo);
					Combo.append(option);	
				});	
			},
			error : function(){
				alert(that.getMsj_Error());
			}
		});
	}

	that.LlenaModal = function(response){
		$(response).each(function(){
			Clave.val(this.Sml_IdEmpresa); Nombre.val(this.Vch_Nombre); RFC.val(this.Vch_RFC); Dir.val(this.Vch_Direccion); Tel.val(this.Vch_Telefono);
			Mail.val(this.Vch_Email);
			 $('#tip_emp option:contains('+this.Vch_Tipo+')').attr('selected', 'selected');
		});
		that.Modall.modal('show');
	}

}

HoneyEnterpise.prototype = HoneyHope;

var hp = new HoneyEnterpise();

$(document).ready(function(){
	hp.CargaTabla(0);
	hp.CargaCombo();
});